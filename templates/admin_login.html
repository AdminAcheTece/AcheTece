<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Login Administrativo - AcheTece</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <!-- Ícone da aba (favicon) -->
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon_final.ico') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon_final.png') }}">
  
  <style>
    :root{
      --azul:#8A00FF;
      --azul-2:#336be3;
      --cinza-bg:#f2f2f2;
      --cinza-texto:#444;
    }

    body{ font-family:'Inter', Arial, sans-serif; margin:0; padding:0; background:var(--cinza-bg); color:var(--cinza-texto); }

    .topbar{
      background:#0b0b0b;
      color:#fff;
      padding:6px 14px;
      border-bottom:1px solid #111;
    }
    .topbar-inner{
      max-width:1000px; margin:0 auto;
      display:flex; align-items:center; justify-content:flex-end; gap:12px;
    }
    .topbar-action{
      display:inline-flex; align-items:center; gap:10px;
      color:#fff; text-decoration:none;
      padding:6px 10px; border-radius:10px;
      background:#111; border:1px solid rgba(255,255,255,.12);
      transition:background .2s, transform .02s;
    }
    .topbar-action:hover{ background:#161616; }
    .ic-top{ width:18px; height:18px; display:block; }
    .ic-wa{ color:#22c55e; }
    .ic-mail{ color:#fff; }

    .navbar{
      overflow:visible;
      padding:10px 20px;
      background:#fff;
      border-bottom:1px solid #ddd;
      display:flex;
      align-items:center;
    }
    .header-left{ display:flex; align-items:center; }
    .logo img{ max-height:60px; height:auto; width:auto; display:block; }

    .login-container{
      display:flex; justify-content:center; align-items:flex-start;
      padding-top:40px;
      min-height:calc(100vh - 140px);
    }
    .login-box{
      background:#fff;
      padding:30px 40px;
      border-radius:10px;
      box-shadow:none !important;
      width:100%; max-width:400px;
    }
    h2{ text-align:center; color:var(--azul); margin-bottom:20px; }
    label{ font-weight:700; color:var(--azul); }

    input[type="email"], input[type="password"]{
      width:100%;
      padding:10px;
      margin:10px 0 6px 0;
      border-radius:6px;
      border:1px solid #ccc;
      background:#f3f7ff;
    }

    .link-esqueci-senha{ text-align:right; margin-bottom:20px; }
    .link-esqueci-senha a{ color:var(--azul); text-decoration:none; font-size:14px; }
    .link-esqueci-senha a:hover{ text-decoration:underline; }

    button{
      background:var(--azul); color:#fff; padding:12px 16px;
      border:none; border-radius:6px; font-weight:700; cursor:pointer;
      width:100%; font-size:16px;
    }

    .flash-message{ text-align:center; margin-bottom:10px; font-weight:700; }
    .flash-message.success{ color:green; }
    .flash-message.error{ color:red; }

    @media (max-width:600px){
      .logo img{ max-height:50px; }
      .login-box{ padding:24px; margin:20px; }
      .topbar-inner{ justify-content:center; gap:12px; }
    }

    .input-wrap{ position:relative; }
    .input-wrap input{ padding-right:36px; }
    .toggle-visibility{
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      background:none; border:none; padding:0; margin:0;
      cursor:pointer; display:flex; align-items:center; justify-content:center;
      width:24px; height:24px; color:#666;
    }
    .toggle-visibility:hover{ color:var(--azul); }
    .toggle-visibility svg{ width:20px; height:20px; stroke:currentColor; }
    .icon-hide{ display:none; }  /* escondemos o "olho cortado" por padrão */
  </style>
</head>
<body>

  <div class="topbar">
    <div class="topbar-inner">
      <a class="topbar-action" href="{{ url_for('contato') }}" aria-label="Fale conosco">
        <svg class="ic-top ic-wa" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M20.52 3.48A11.94 11.94 0 0 0 12.06 0C5.7 0 .5 5.19.5 11.6c0 2.05.54 4.05 1.58 5.82L0 24l6.76-2.01a11.6 11.6 0 0 0 5.3 1.29h.01c6.36 0 11.56-5.19 11.56-11.6 0-3.09-1.22-6-3.11-8.2Z"/>
        </svg>
        <svg class="ic-top ic-mail" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <rect x="3" y="5" width="18" height="14" rx="2" ry="2"></rect>
          <path d="M3 7l9 6 9-6"></path>
        </svg>
        <span style="font-weight:700;">Fale conosco</span>
      </a>
    </div>
  </div>

  <header class="navbar">
    <div class="header-left">
      <div class="logo">
        <img src="{{ url_for('static', filename='logo.jpg') }}" alt="Logo AcheTece">
      </div>
    </div>
  </header>

  <div class="login-container">
    <div class="login-box">
      <h2>Login do Administrador</h2>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            {% if category == 'error' %}
              <div class="flash-message error">{{ message }}</div>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST" autocomplete="on">
        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required autocomplete="username">

        <label for="senha">Senha:</label>
        <div class="input-wrap">
          <input id="senha" type="password" name="senha" required autocomplete="current-password">
          <button type="button" class="toggle-visibility" aria-label="Mostrar senha" aria-pressed="false" data-target="#senha" title="Mostrar/ocultar senha">
            <!-- Ícone olho aberto -->
            <svg class="icon-show" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <!-- Ícone olho cortado -->
            <svg class="icon-hide" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-7 0-11-7-11-7a21.85 21.85 0 0 1 5.06-5.94"/>
              <path d="M1 1l22 22"/>
              <path d="M9.88 9.88a3 3 0 0 0 4.24 4.24"/>
              <path d="M9.88 9.88L4.12 4.12"/>
              <path d="M14.12 14.12L19.88 19.88"/>
            </svg>
          </button>
        </div>

        <div class="link-esqueci-senha">
          <a href="{{ url_for('esqueci_senha') }}">Esqueci a senha</a>
        </div>

        <button type="submit">Entrar</button>
      </form>
    </div>
  </div>

  <script>
    (function () {
      function togglePassword(btn) {
        const input = document.querySelector(btn.getAttribute('data-target'));
        if (!input) return;
        const isText = input.type === 'text';
        input.type = isText ? 'password' : 'text';
        btn.setAttribute('aria-pressed', String(!isText));
        btn.setAttribute('aria-label', isText ? 'Mostrar senha' : 'Ocultar senha');
        // alterna ícones
        btn.querySelector('.icon-show').style.display = isText ? 'block' : 'none';
        btn.querySelector('.icon-hide').style.display = isText ? 'none' : 'block';
      }

      document.addEventListener('click', function (e) {
        const btn = e.target.closest('.toggle-visibility');
        if (!btn) return;
        e.preventDefault();
        togglePassword(btn);
      });

      document.addEventListener('mousedown', function (e) {
        const btn = e.target.closest('.toggle-visibility');
        if (!btn) return;
        const input = document.querySelector(btn.getAttribute('data-target'));
        if (!input || input.type === 'text') return;
        input.type = 'text';
        btn.setAttribute('aria-pressed', 'true');
        btn.querySelector('.icon-show').style.display = 'none';
        btn.querySelector('.icon-hide').style.display = 'block';
      });
      ['mouseup','mouseleave','blur'].forEach(evt => {
        document.addEventListener(evt, function () {
          const btn = document.querySelector('.toggle-visibility[aria-pressed="true"]');
          if (!btn) return;
          const input = document.querySelector(btn.getAttribute('data-target'));
          if (!input) return;
          input.type = 'password';
          btn.setAttribute('aria-pressed', 'false');
          btn.querySelector('.icon-show').style.display = 'block';
          btn.querySelector('.icon-hide').style.display = 'none';
        });
      });
    })();
  </script>

</body>
</html>
