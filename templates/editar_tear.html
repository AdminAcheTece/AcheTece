<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Editar Tear</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon_final.ico') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon_final.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    :root{ --roxo:#8A00FF; --roxo-hover:#A63DFF; --laranja:#ff7a00; }

    body{background:#f7f7fb;color:#111;font-family:Inter,Arial,system-ui,sans-serif}
    header{background:#fff;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #ddd;}
    .logo img{max-height:48px;height:auto;width:auto;}
    .container{max-width:760px;margin:24px auto;background:#fff;border:1px solid #eee;border-radius:14px;padding:18px}
    h1.titulo{margin:4px 0 16px;font-size:22px;font-weight:800}
    .formulario label{display:block;margin:10px 0 6px;font-weight:700}
    .formulario input,.formulario select{width:100%;height:42px;border:1px solid #ccc;border-radius:10px;padding:0 10px;background:#fff}

    .btn{display:inline-flex;align-items:center;justify-content:center;height:44px;padding:0 18px;border:0;border-radius:9999px;font-weight:800;cursor:pointer;transition:.2s;text-decoration:none}
    .btn-roxo{background:var(--roxo);color:#fff}
    .btn-roxo:hover{background:var(--roxo-hover);transform:translateY(-1px)}
    .btn-perigo{background:#e53935;color:#fff}
    .btn-perigo:hover{filter:brightness(.95);transform:translateY(-1px)}
    .link-voltar{display:inline-block;margin-top:14px;text-decoration:none;color:#555}
    .link-voltar:hover{text-decoration:underline}

    .acoes{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    @media (max-width:560px){
      .container{margin:10px}
      .btn{height:42px;padding:0 14px;font-size:14px}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <img src="{{ url_for('static', filename='logo.jpg') }}" alt="Logo AcheTece">
    </div>
  </header>

  <div class="container">
    <h1 class="titulo">Editar Tear</h1>

    <form method="POST" class="formulario" action="{{ url_for('editar_tear', id=tear.id) }}">
      <label for="marca">Marca</label>
      <input type="text" id="marca" name="marca" value="{{ tear.marca or '' }}" required>

      <label for="modelo">Modelo</label>
      <input type="text" id="modelo" name="modelo" value="{{ tear.modelo or '' }}" required>

      <label for="tipo">Tipo</label>
      {% set _tipo = tear.tipo or '' %}
      <select id="tipo" name="tipo" required>
        <option value="">-- Selecione --</option>
        <option value="MONO"  {{ 'selected' if _tipo=='MONO' else '' }}>MONO</option>
        <option value="DUPLA" {{ 'selected' if _tipo=='DUPLA' else '' }}>DUPLA</option>
      </select>

      <label for="finura">Finura (galga)</label>
      <input type="number" id="finura" name="finura" value="{{ tear.finura if tear.finura is not none else '' }}" required>

      <label for="diametro">Diâmetro</label>
      <input type="number" id="diametro" name="diametro" value="{{ tear.diametro if tear.diametro is not none else '' }}" required>

      <label for="alimentadores">Alimentadores</label>
      <input type="number" id="alimentadores" name="alimentadores" value="{{ tear.alimentadores if tear.alimentadores is not none else '' }}" required>

      <label for="elastano">Elastano</label>
      {% set _elas = (tear.elastano or '') %}
      <select id="elastano" name="elastano" required>
        <option value="">-- Selecione --</option>
        <option value="Sim" {{ 'selected' if _elas in ['Sim','S',True,'True',1] else '' }}>Sim</option>
        <option value="Não" {{ 'selected' if _elas in ['Não','N',False,'False',0] else '' }}>Não</option>
      </select>

      <div class="acoes">
        <button type="submit" class="btn btn-roxo">SALVAR</button>

        <form method="POST" action="{{ url_for('excluir_tear', id=tear.id) }}" onsubmit="return confirm('Confirma excluir este tear? Essa ação é irreversível.');" style="display:inline">
          <button type="submit" class="btn btn-perigo">EXCLUIR</button>
        </form>

        <a class="link-voltar" href="{{ url_for('painel_malharia') }}">← Voltar ao Painel Malharia</a>
      </div>
    </form>
  </div>
</body>
</html>
