<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>AcheTece - Portal de Malharias</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Ícone da aba (favicon) -->
  <link rel="icon" type="image/x-icon" href="/static/favicon_final.ico">
  <link rel="icon" type="image/png" href="/static/favicon_final.png">

  <!-- CSS principal -->
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ==================== VARIÁVEIS ==================== */
    :root{
      --roxo:#8A00FF; --roxo-hover:#A63DFF; --preto:#000;
      --procura-bg:#F2E8FF; --procura-fg:#7A1BFF;
      --malharia-bg:#E6FCF4; --malharia-fg:#0BA98B;
    }

    /* ==================== HEADER / NAV ==================== */
    .navbar{overflow:visible;padding-top:6px;padding-bottom:6px;display:flex;align-items:center;}
    .header-left,.header-right{display:flex;align-items:center;}
    .header-right{margin-left:auto;gap:16px;}

    /* Botões da faixa branca (como na imagem) */
    .hdr-actions{display:flex;align-items:center;gap:10px}
    .btn-entrar,
    .btn-anunciar{
      height:40px;                   /* cabe na faixa sem aumentar altura */
      line-height:40px;              /* centraliza texto */
      border-radius:9999px;          /* pílula */
      padding:0 18px;
      font-weight:700;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:10px;
      white-space:nowrap;
    }
    .btn-entrar{
      background:#fff;
      color:#222;
      border:1.5px solid #D9DCE1;    /* borda cinza clara */
    }
    .btn-entrar:hover{background:#fafafa}
    .btn-anunciar{
      background:#F28C00;            /* laranja OLX-like */
      color:#fff;
      border:0;
    }
    .btn-anunciar:hover{background:#E57F00}
    .btn-anunciar svg{
      width:18px;height:18px;display:block;fill:none;stroke:#fff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;
    }

    /* Em telas pequenas, escondemos os botões p/ não “estourar” o header */
    @media (max-width:820px){
      .hdr-actions{display:none}
    }

    .hamburger{display:inline-flex;flex-direction:column;align-items:center;justify-content:center;width:40px;height:40px;border:none;background:transparent;cursor:pointer;}
    .hamburger span{display:block;width:20px;height:2px;background:var(--preto);border-radius:2px;}
    .hamburger span+span{margin-top:4px;}
    @media (max-width:768px){.hamburger{width:32px;height:32px}.hamburger span{width:18px}.hamburger span+span{margin-top:3px}}

    /* ==================== BARRA PROMO (topo) ==================== */
    .promo-bar{background:var(--preto);color:#fff;display:flex;align-items:center;justify-content:center;gap:12px;padding:6px 10px;font-size:14px;line-height:1.2;}
    .promo-cta{display:inline-block;background:var(--roxo);color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;font-weight:600;white-space:nowrap;transition:.2s;}
    .promo-cta:hover{background:var(--roxo-hover);transform:translateY(-1px);}
    @media (max-width:600px){.promo-bar{flex-wrap:wrap;row-gap:6px}}

    /* ==================== MODAL / SHEET (menu) ==================== */
    .overlay-menu{position:fixed;inset:0;z-index:1000;display:none;}
    .overlay-menu.is-open{display:block;}
    .overlay-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);}
    .overlay-panel{position:relative;margin:40px auto;width:min(960px,calc(100% - 24px));background:#fff;border-radius:20px;box-shadow:none !important;overflow:hidden;display:flex;flex-direction:column;max-height:calc(100% - 80px);}
    .overlay-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid #eee;}
    .overlay-header h2{margin:0;font-size:22px;font-weight:700;color:#111;}
    .overlay-close{border:0;background:#f3f3f3;width:36px;height:36px;border-radius:12px;font-size:22px;line-height:1;cursor:pointer;}
    .overlay-content{display:grid;grid-template-columns:1fr 1fr;gap:28px;padding:22px;overflow:auto;}
    .section-title{font-size:14px;color:#6b6b6b;font-weight:700;margin:6px 0 10px;text-transform:uppercase;letter-spacing:.3px;}
    .section-title.mt{margin-top:18px;}

    /* ==================== LOGIN / SOCIAL (menu) ==================== */
    .section-title--login{font-weight:700;font-size:16px;line-height:1.1;color:#111;text-transform:none;}
    .social-row{display:flex;gap:12px;flex-wrap:wrap}
    .btn-google,.btn-facebook{width:190px;height:46px;padding:0 16px;border-radius:999px;display:flex;align-items:center;gap:10px;box-sizing:border-box;font-size:14px;font-weight:500;}
    .btn-google{background:#f7f7f7;border:1px solid #dadce0;color:#3c4043;}
    .btn-google:hover{background:#f1f1f1;}
    .btn-google img{width:40px;height:40px;}
    .btn-facebook{background:#1877F2;color:#fff;border:0;}
    .btn-facebook:hover{background:#166FE5;transform:translateY(-1px);}
    .btn-facebook .fb-icon{display:flex;align-items:center;justify-content:center;width:46px;height:46px;}
    .btn-facebook .fb-icon svg{width:30px;height:30px;display:block;}
    .form-subtitle{font-weight:700;font-size:16px;margin:28px 0 8px;}
    .access-fields{width:392px;max-width:100%;padding-top:8px;}
    .input{width:100%;height:48px;border-radius:999px;border:1px solid #e6e6e6;padding:0 16px;margin-bottom:10px;font-size:14px;background:#eaf1ff;color:#111;}
    .links-inline{margin-top:-4px;margin-bottom:14px;}
    .links-inline a{font-size:12px;color:#333;text-decoration:none;}
    .btn-primary{width:392px;max-width:100%;height:54px;border-radius:999px;border:0;background:#8A00FF;color:#fff;font-weight:800;font-size:16px;}
    .signup-text{margin-top:8px;font-size:12px;color:#000;}
    @media (max-width:520px){.btn-google,.btn-facebook,.access-fields,.btn-primary{width:100%}}

    /* ==================== MINI-CARDS / LISTAS (menu) ==================== */
    .section-title--simple{font-weight:700;font-size:16px;line-height:1.1;color:#111;text-transform:none;}
    .cards-row{display:flex;gap:12px;flex-wrap:nowrap;align-items:flex-start;}
    .mini-card{flex:0 0 auto;padding:8px 12px;border-radius:12px;gap:6px;display:inline-flex;align-items:center;border:1px solid #eee;text-decoration:none;font-weight:700;}
    .mini-card:hover{transform:translateY(-3px);border-color:rgba(0,0,0,.06)}
    .mini-card-ico svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;}
    .mini-card-title{font-size:12px;white-space:nowrap;}
    .mini-card.procura{background:var(--procura-bg);color:var(--procura-fg);}
    .mini-card.malharia{background:var(--malharia-bg);color:var(--malharia-fg);}
    .list-links{display:flex;flex-direction:column;border-top:1px solid #f0f0f0;margin-top:8px;}
    .list-item{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:14px 0;text-decoration:none;color:#222;border-bottom:1px solid #f5f5f5;}
    .list-icon{flex:0 0 24px;display:flex;align-items:center;justify-content:center;}
    .list-text{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .list-item .arrow svg{width:22px;height:22px;stroke-width:3;}

    /* ==================== LAYOUT (FILTROS + RESULTADOS) ==================== */
    .page-outer{max-width:1280px;margin:0 auto;padding:0 16px;}
    .search-layout{display:grid;grid-template-columns:300px 1fr;gap:24px;align-items:start;margin:10px 0 0;}
    @media (max-width:1024px){.search-layout{grid-template-columns:1fr}}

    /* Filtros (mantidos) */
    .filters-panel{border:1px solid #eee;border-radius:14px;padding:16px;background:#fff;position:sticky;top:56px;max-height:calc(100vh - 72px);overflow:auto;z-index:10;}
    .filters-title{margin:0 0 12px;font-size:18px;font-weight:700;}
    .filter-field{margin-bottom:12px;}
    .filter-field label{display:block;font-size:14px;margin-bottom:6px;color:#444;}
    .filter-field select{width:100%;height:40px;padding:8px 10px;border:1px solid #ccc;border-radius:10px;background:#fff;color:#333;}
    .filter-actions .btn-primary{width:100%;}
    .link-reset{display:inline-block;margin-top:10px;font-size:14px;color:#6a6a6a;text-decoration:underline;}
    @media (max-width:1024px){
      .filters-panel{position:fixed;left:0;top:0;bottom:0;width:min(90%,360px);max-width:90vw;border-radius:0;padding:16px;transform:translateX(-110%);transition:transform .2s ease;z-index:1001;max-height:none;overflow:auto}
      .filters-panel.is-open{transform:translateX(0)}
      body.filters-open{overflow:hidden}
    }

    /* ===== Barra mobile estilo OLX ===== */
    .mobile-controls{display:none;border-top:1px solid #eee;border-bottom:1px solid #eee;background:#fff}
    .mobile-controls-inner{max-width:1280px;margin:0 auto;padding:10px 16px}
    .location-row{display:flex;align-items:center;gap:8px;font-size:14px;color:#333;margin-bottom:8px}
    .location-row select{border:0;background:#f7f7f7;border-radius:10px;padding:8px 10px}
    .toolbar-row{display:flex;gap:10px;align-items:center}
    .btn-filtros{display:inline-flex;align-items:center;gap:8px;border:1px solid #e5e5e5;background:#fff;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn-filtros svg{width:18px;height:18px}
    .filter-pill{display:inline-flex;align-items:center;border:2px solid #e5d3ff;background:#f3e9ff;color:#5525a5;border-radius:12px;padding:10px 14px;font-weight:600;min-height:40px;max-width:70vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    @media (max-width:1024px){.mobile-controls{display:block}}

    /* ===== Resultados ===== */
    .right-col{min-width:0;}
    .loc-card{background:#f6f7f9;border-radius:12px;border:1px solid #eceff3;padding:14px;margin-bottom:14px}
    .loc-field{display:flex;align-items:center;gap:10px;border:1px solid #dfe3e8;background:#fff;border-radius:12px;padding:12px 14px}
    .loc-left{display:flex;align-items:center;gap:8px;color:#333;font-weight:600}
    .loc-clear{margin-left:auto;background:transparent;border:0;cursor:pointer;font-size:18px;line-height:1}
    .results-head h1{margin:8px 0 6px;font-size:clamp(20px,2.8vw,28px)}
    .results-sub{color:#5b5b5b;margin-bottom:12px}
    .results-toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
    .results-toolbar .select{height:40px;border:1px solid #dfe3e8;border-radius:10px;background:#fff;padding:8px 12px}
    .results-panel .tabela-container{border:1px solid #eee;border-radius:12px;overflow:auto;background:#fff}
    .paginacao{display:flex;gap:12px;align-items:center;justify-content:center;margin:14px 0}
    .paginacao a{color:var(--roxo);text-decoration:none;font-weight:700}

    /* ==================== CTA (faixa preta) e RODAPÉ (como no fale_conosco) ==================== */
    .cta-bar{background:#000;color:#fff;padding:20px 16px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;border-top:1px solid rgba(255,255,255,0.06);margin-top:32px;justify-content:flex-start;}
    .cta-text h3{margin:0 0 4px 0;font-size:18px;font-weight:700;line-height:1.2;}
    .cta-text p{margin:0;font-size:15px;opacity:.9;}
    .cta-btn{display:inline-block;background:#fff;color:#000;text-decoration:none;padding:10px 22px;border-radius:9999px;font-weight:700;white-space:nowrap;}
    .cta-btn:hover{background:#f2f2f5;transform:translateY(-1px);}
    .site-footer{background:#fff;color:#211a2a;border-top:1px solid #eee;padding:18px 16px 28px;}
    .footer-inner{max-width:1180px;margin:0 auto;display:grid;grid-template-columns:auto 1fr;gap:20px 28px;align-items:start;}
    .footer-brand img{height:44px;width:auto;display:block;}
    .footer-cols{display:grid;grid-template-columns:repeat(2,minmax(180px,240px));gap:12px 28px;}
    .footer-col h4{margin:0 0 8px 0;font-size:14px;font-weight:700;color:#251c33;}
    .footer-col ul{list-style:none;margin:0;padding:0;}
    .footer-col li+li{margin-top:6px;}
    .footer-col a{color:#2a2535;text-decoration:none;font-size:14px;}
    .footer-col a:hover{text-decoration:underline;}
  </style>
</head>
<body>

  <!-- Faixa preta estreita no topo -->
  <section class="promo-bar" aria-label="Oferta para malharias">
    <span><strong>Malharia:</strong> receba agora novos pedidos por apenas <strong>R$49,90/mês</strong>.</span>
    <a class="promo-cta" href="/malharia_info">Saiba como</a>
  </section>

  <!-- Cabeçalho -->
  <header class="navbar">
    <div class="header-left">
      <div class="logo">
        <img src="/static/logo.jpg" alt="Logo AcheTece" decoding="async" fetchpriority="high">
      </div>
    </div>

    <div class="header-right">
      <!-- NOVOS BOTÕES -->
      <div class="hdr-actions">
        <a href="/login" class="btn-entrar">Entrar</a>
        <a href="/cadastrar_empresa" class="btn-anunciar" aria-label="Cadastrar malharia">
          <!-- ícone (igual ao estilo da referência) -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 5v14M5 12h14"></path>
            <circle cx="19" cy="5" r="1.5" fill="#fff" stroke="none"></circle>
          </svg>
          <span>Cadastrar malharia</span>
        </a>
      </div>

      <button class="hamburger" id="hamburgerBtn" type="button" aria-label="Abrir menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <!-- CONTROLES MOBILE (estilo OLX) -->
  <div class="mobile-controls" aria-hidden="false">
    <div class="mobile-controls-inner">
      <div class="location-row">
        <span aria-hidden="true">📍</span>
        <label for="loc-mobile" class="sr-only">Localização</label>
        <select id="loc-mobile" name="localizacao">
          <option value="">Buscando em todo o Brasil</option>
          <option value="SC">Santa Catarina</option>
          <option value="RS">Rio Grande do Sul</option>
          <option value="PR">Paraná</option>
        </select>
      </div>
      <div class="toolbar-row">
        <button class="btn-filtros" id="toggleFiltersMobile" aria-controls="filtersPanel" aria-expanded="false">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18M6 12h12M10 18h4" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          Filtros
        </button>
        {% set ativos = [] %}
        {% for k,v in filtros.items() %}{% if v %}{% set _ = ativos.append(k|capitalize ~ ': ' ~ v) %}{% endif %}{% endfor %}
        <div class="filter-pill" title="{{ ativos|join(', ') if ativos else 'Todos os teares' }}">
          {{ ativos|join(' • ') if ativos else 'Todos os teares' }}
        </div>
      </div>
    </div>
  </div>

  <!-- ===== ESQ = FILTROS | DIR = RESULTADOS ===== -->
  <div class="page-outer">
    <div class="search-layout">

      <!-- COLUNA ESQUERDA: FILTROS -->
      <aside class="filters-panel" id="filtersPanel">
        <h2 class="filters-title">Filtrar teares</h2>
        <form method="POST" class="formulario" action="{{ url_for('index') }}">
          {% for campo, opcoes_campo in opcoes.items() %}
            <div class="filter-field">
              <label for="{{ campo }}">{{ campo|capitalize }}</label>
              <select name="{{ campo }}" id="{{ campo }}">
                <option value="">-- Todos --</option>
                {% for opcao in opcoes_campo %}
                  <option value="{{ opcao }}" {% if filtros[campo] == opcao %}selected{% endif %}>{{ opcao }}</option>
                {% endfor %}
              </select>
            </div>
          {% endfor %}
          <div class="filter-actions">
            <button type="submit" class="btn-primary">Buscar</button>
            <a href="{{ url_for('index') }}" class="link-reset">Limpar</a>
          </div>
        </form>
      </aside>

      <!-- COLUNA DIREITA: RESULTADOS -->
      <div class="right-col">
        <section class="loc-card" aria-label="Localização">
          <div style="font-weight:700; color:#222; margin-bottom:8px;">
            Localização <span style="background:linear-gradient(90deg,#a335ff,#ff7a00);color:#fff;border-radius:12px;padding:2px 8px;font-size:12px;margin-left:6px;">Novo</span>
          </div>
        
          <!-- Campo único com autocomplete (estilo OLX) -->
          <div class="loc-search-wrap">
            <span class="loc-ico" aria-hidden="true">📍</span>
            <input id="loc-input" list="loc-suggestions"
                   placeholder="Digite um bairro ou cidade"
                   autocomplete="off" inputmode="search" />
            <datalist id="loc-suggestions"></datalist>
            <button class="loc-clear" type="button" aria-label="Limpar localização" title="Limpar">×</button>
          </div>
        </section>

        <header class="results-head">
          <h1>Teares disponíveis</h1>
          <div class="results-sub">
            {% set _total = total_resultados if total_resultados is defined else (resultados|length if resultados else 0) %}
            {% if _total and _total > 0 %}
              1 - {{ resultados|length if resultados else 0 }} de {{ _total }} resultados
            {% else %}
              Ajuste os filtros para ver resultados.
            {% endif %}
          </div>

        <div class="results-toolbar">
            <label for="ordenar" style="font-weight:600;color:#333">Ordenar por</label>
            <select id="ordenar" class="select" name="ordenar" onchange="location.search = updateQueryString('ordenar', this.value)">
              {% set ord = request.args.get('ordenar', 'relevancia') %}
              <option value="relevancia" {% if ord=='relevancia' %}selected{% endif %}>Mais relevantes</option>
              <option value="novos" {% if ord=='novos' %}selected{% endif %}>Mais recentes</option>
              <option value="antigos" {% if ord=='antigos' %}selected{% endif %}>Mais antigos</option>
            </select>
          </div>
        </header>

        <section id="busca" class="results-panel">
          {% if resultados %}
            <div class="tabela-container">
              {{ tabela_html|safe if tabela_html is defined else '' }}
            </div>

            <div class="paginacao">
              {% if pagina > 1 %}
                <a href="?pagina={{ pagina - 1 }}{% for k, v in filtros.items() if v %}&{{ k }}={{ v }}{% endfor %}">← Anterior</a>
              {% endif %}
              Página {{ pagina }} de {{ total_paginas }}
              {% if pagina < total_paginas %}
                <a href="?pagina={{ pagina + 1 }}{% for k, v in filtros.items() if v %}&{{ k }}={{ v }}{% endfor %}">Próxima →</a>
              {% endif %}
            </div>

            <form action="/exportar" method="get">
              {% for campo, valor in filtros.items() %}
                {% if valor %}
                  <input type="hidden" name="{{ campo }}" value="{{ valor }}">
                {% endif %}
              {% endfor %}
              <button type="submit" class="btn-primary" style="width:auto;padding:10px 16px;border-radius:12px">Exportar CSV</button>
            </form>
          {% else %}
            <div style="background:#fff;border:1px solid #eee;border-radius:12px;padding:18px">
              <strong>Nenhum resultado</strong><br>
              Tente flexibilizar alguns filtros ou limpar a localização.
            </div>
          {% endif %}
        </section>
      </div>
    </div>
  </div>

  <!-- MENU / OVERLAY completo -->
  <div id="overlayMenu" class="overlay-menu" aria-hidden="true">
    <div class="overlay-backdrop" data-close></div>
    <section class="overlay-panel" role="dialog" aria-modal="true" aria-labelledby="overlayMenuTitle">
      <header class="overlay-header">
        <h2 id="overlayMenuTitle">Menu</h2>
        <button class="overlay-close" type="button" aria-label="Fechar" data-close>×</button>
      </header>

      <div class="overlay-content">
        <div class="overlay-col">
          <h3 class="section-title section-title--login">Entrar ou criar conta</h3>

          <div class="social-row">
            <button class="btn-google" onclick="location.href='/login_google'">
              <img src="/static/icone_google.png" alt="Google">
              <span class="g-text">Entrar com Google</span>
            </button>

            <button class="btn-facebook" onclick="alert('Conectar Facebook em breve')">
              <span class="fb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff">
                  <path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 5 3.66 9.12 8.44 9.88v-6.99H8.08v-2.9h2.36V9.83c0-2.33 1.39-3.62 3.52-3.62 1.02 0 2.09.18 2.09.18v2.3h-1.18c-1.17 0-1.54.73-1.54 1.48v1.78h2.63l-.42 2.9h-2.21v6.99C18.34 21.12 22 17 22 12z"/>
                </svg>
              </span>
              <span>Entrar com Facebook</span>
            </button>
          </div>

          <h3 class="form-subtitle">Dados de acesso</h3>
          <div class="access-fields">
            <input type="email" placeholder="Email de login..." class="input" autocomplete="username">
            <input type="password" placeholder="Senha de acesso..." class="input" autocomplete="current-password">
            <div class="links-inline">
              <a href="/esqueci_senha">Esqueci minha senha</a>
            </div>
            <button class="btn-primary" onclick="location.href='/login'">Entrar</button>
            <div class="signup-text">Não tem cadastro? <a href="/cadastrar_empresa">Crie sua conta aqui</a></div>
          </div>
        </div>

        <div class="overlay-col">
          <h3 class="section-title--simple">Facilidades AcheTece</h3>
          <div class="cards-row">
            <a class="mini-card procura" href="{{ url_for('index') }}#busca">
              <div class="mini-card-ico">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="6.8"></circle>
                  <line x1="15.5" y1="15.5" x2="20" y2="20"></line>
                </svg>
              </div>
              <div class="mini-card-title">Procuro Malharia</div>
            </a>

            <a class="mini-card malharia" href="/malharia_info">
              <div class="mini-card-ico">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M3 20V9l6 3V9l6 3V6h3v14H3z"/>
                </svg>
              </div>
              <div class="mini-card-title">Sou Malharia</div>
            </a>
          </div>

          <h3 class="section-title--simple mt">Mais opções</h3>
          <nav class="list-links">
            <a class="list-item" href="/cadastrar_empresa">
              <span class="list-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 20V9l6 3V9l6 3V6h3v14H3zM5 18h2v-2H5v2zm0-4h2v-2H5v2zm4 4h2v-2H9v2zm0-4h2v-2H9v2zm4 4h2v-2h-2v2z"/>
                </svg>
              </span>
              <span class="list-text">Cadastrar minha malharia</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>

            <a class="list-item" href="{{ url_for('quem_somos') }}">
              <span class="list-icon">
                <img src="/static/logo_simbolo.png" alt="AcheTece" width="28" height="28" style="display:block">
              </span>
              <span class="list-text">Conheça o AcheTece</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>

            <a class="list-item" href="https://wa.me/5547999999999" target="_blank" rel="noopener">
              <span class="list-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#25D366">
                  <path d="M12 .5C5.65.5.5 5.65.5 12c0 2.11.55 4.16 1.6 5.97L.5 23.5l5.66-1.56A11.44 11.44 0 0 0 12 23.5c6.35 0 11.5-5.15 11.5-11.5S18.35.5 12 .5zm0 20.9c-1.83 0-3.62-.49-5.18-1.41l-.37-.22-3.36.92.9-3.28-.24-.38a9.53 9.53 0 0 1-1.45-5.03C2.3 6.48 6.65 2.1 12 2.1c5.34 0 9.7 4.38 9.7 9.8s-4.36 9.5-9.7 9.5zm5.32-7.13c-.29-.15-1.71-.84-1.97-.94-.27-.1-.46-.15-.65.15s-.945 1.176-1.159 1.421c-.215.248-.423.277-.785.096-.362-.181-1.528-.562-2.91-1.791-1.076-.962-1.8-2.144-2.012-2.505-.215-.362-.023-.558.159-.739.164-.163.362-.423.543-.634.181-.21.241-.362.362-.604.124-.248.062-.466-.03-.647-.091-.181-.824-1.996-1.13-2.725-.297-.715-.6-.619-.824-.629-.215-.009-.466-.011-.715-.011s-.647.091-.985.466c-.334.372-1.295 1.266-1.295 3.084 0 1.819 1.326 3.575 1.511 3.822.181.248 2.611 3.981 6.327 5.58.885.381 1.575.609 2.113.781.889.283 1.698.243 2.34.148.714-.106 2.145-.876 2.447-1.72.302-.843.302-1.562.211-1.72-.091-.163-.334-.248-.696-.429z"/>
                </svg>
              </span>
              <span class="list-text">Suporte AcheTece</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>
          </nav>
        </div>
      </div>
    </section>
  </div>

  <!-- CTA (faixa preta) -->
  <section class="cta-bar" aria-label="Convite para cadastro">
    <div class="cta-text">
      <h3>É proprietário de uma malharia?</h3>
      <p>Cadastre sua malharia e comece a receber novos pedidos.</p>
    </div>
    <a href="{{ url_for('malharia_info') }}" class="cta-btn">Cadastrar</a>
  </section>

  <!-- Rodapé -->
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <img src="/static/logo_simbolo.png" alt="AcheTece">
      </div>
      <div class="footer-cols">
        <div class="footer-col">
          <h4>Sobre nós</h4>
          <ul>
            <li><a href="{{ url_for('quem_somos') }}">O AcheTece</a></li>
            <li><a href="{{ url_for('malharia_info') }}">Como funciona</a></li>
            <li><a href="{{ url_for('contato') }}">Fale conosco</a></li>
            <li><a href="{{ url_for('termos') }}">Termos e Políticas</a></li>
          </ul>
        </div>
        <div class="footer-col"><h4>&nbsp;</h4><ul><li>&nbsp;</li></ul></div>
      </div>
    </div>
  </footer>

  <!-- ===== SCRIPTS ===== -->
  <script>
    function updateQueryString(key, value){
      const url = new URL(window.location);
      url.searchParams.set(key, value);
      return url.pathname + url.search;
    }
  </script>
  <script>
    (function(){
      const overlay=document.getElementById('overlayMenu');
      const openBtn=document.getElementById('hamburgerBtn');
      const closeEls=overlay.querySelectorAll('[data-close]');
      function openMenu(){overlay.classList.add('is-open');overlay.setAttribute('aria-hidden','false');document.body.style.overflow='hidden';}
      function closeMenu(){overlay.classList.remove('is-open');overlay.setAttribute('aria-hidden','true');document.body.style.overflow='';}
      if(openBtn) openBtn.addEventListener('click',openMenu);
      closeEls.forEach(el=>el.addEventListener('click',closeMenu));
      document.addEventListener('keydown',e=>{ if(e.key==='Escape' && overlay.classList.contains('is-open')) closeMenu();});
      overlay.addEventListener('click',e=>{ if(e.target===overlay) closeMenu();});
    })();
  </script>
  <script>
    (function(){
      const btnMobile  = document.getElementById('toggleFiltersMobile');
      const panel = document.getElementById('filtersPanel');
      if(!panel) return;
      function toggle(){
        const open = panel.classList.toggle('is-open');
        document.body.classList.toggle('filters-open', open);
        if(btnMobile)  btnMobile.setAttribute('aria-expanded',  open ? 'true' : 'false');
      }
      if(btnMobile)  btnMobile.addEventListener('click',  toggle);
      panel.addEventListener('click', e => {
        if(e.target === panel && panel.classList.contains('is-open')) toggle();
      });
    })();
  </script>
  <script>
    (function(){
      const clear = document.querySelector('.loc-clear');
      const label = document.getElementById('loc-label');
      if(clear && label){
        clear.addEventListener('click', ()=>{ label.textContent='Brasil'; });
      }
    })();
  </script>

  <script>
  (function(){
    const input   = document.getElementById('loc-input');
    const list    = document.getElementById('loc-suggestions');
    const clearBt = document.querySelector('.loc-clear');
  
    // selects da coluna de filtros (mantidos no seu form)
    const formFiltros = document.querySelector('.filters-panel form');
    const selUF   = document.getElementById('estado');
    const selCID  = document.getElementById('cidade');
  
    if(!input || !list || !formFiltros || !selUF || !selCID) return;
  
    // Monta sugestões a partir das opções reais dos selects
    function rebuildSuggestions(){
      list.innerHTML = '';
  
      // Estados (UF)
      Array.from(selUF.options).forEach(o=>{
        const v=o.value?.trim(); if(!v) return;
        const op=document.createElement('option'); op.value=v; list.appendChild(op);
      });
  
      // Cidades (as que já estão carregadas no select atual)
      const ufs = Array.from(selUF.options).map(o=>o.value).filter(Boolean);
      Array.from(selCID.options).forEach(o=>{
        const v=o.value?.trim(); if(!v) return;
        // Sugestão só com a cidade
        const op1=document.createElement('option'); op1.value=v; list.appendChild(op1);
        // E variações "Cidade - UF" (para quem digita igual à OLX)
        ufs.forEach(uf=>{
          const op2=document.createElement('option'); op2.value=`${v} - ${uf}`; list.appendChild(op2);
        });
      });
    }
    rebuildSuggestions();
  
    // Sempre que o select de cidade mudar (ex.: você carrega via backend conforme UF),
    // dá pra reconstruir a lista:
    selCID.addEventListener('change', rebuildSuggestions);
  
    function aplicaLocalizacao(query){
      const q = (query || '').trim();
      if(!q) return;
  
      let cidade=null, uf=null;
  
      // Tenta "Cidade - UF"
      const m = q.match(/^(.*?)(?:\s*-\s*([A-Za-z]{2}))$/);
      if(m){
        cidade = m[1].trim();
        uf     = m[2].toUpperCase();
      } else {
        // Se digitar só a UF
        const ufs = Array.from(selUF.options).map(o=>o.value);
        const achouUF = ufs.find(u => u && u.toLowerCase()===q.toLowerCase());
        if(achouUF){ uf = achouUF; }
        else { cidade = q; } // senão, tratamos como cidade
      }
  
      // Aplica UF se existir entre as opções
      if(uf && Array.from(selUF.options).some(o=>o.value===uf)){
        selUF.value = uf;
      } else {
        selUF.value = ''; // deixa sem filtro de UF
      }
  
      // Aplica cidade se existir entre as opções atuais
      if(cidade && Array.from(selCID.options).some(o=>o.value.toLowerCase()===cidade.toLowerCase())){
        selCID.value = Array.from(selCID.options).find(o=>o.value.toLowerCase()===cidade.toLowerCase()).value;
      } else {
        selCID.value = '';
      }
  
      // Envia o formulário de filtros
      formFiltros.requestSubmit ? formFiltros.requestSubmit() : formFiltros.submit();
    }
  
    // Enter ou perda de foco aplica
    input.addEventListener('keydown', e=>{
      if(e.key==='Enter'){ e.preventDefault(); aplicaLocalizacao(input.value); }
    });
    input.addEventListener('change', ()=> aplicaLocalizacao(input.value));
  
    // Botão de limpar
    if(clearBt){
      clearBt.addEventListener('click', ()=>{
        input.value = '';
        selUF.value = '';
        selCID.value = '';
        formFiltros.requestSubmit ? formFiltros.requestSubmit() : formFiltros.submit();
      });
    }
  })();
  </script>
  
</body>
</html>
