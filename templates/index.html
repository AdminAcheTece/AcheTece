<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>AcheTece - Portal de Malharias</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- √çcone da aba (favicon) -->
  <link rel="icon" type="image/x-icon" href="/static/favicon_final.ico">
  <link rel="icon" type="image/png" href="/static/favicon_final.png">

  <!-- CSS principal -->
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ==================== VARI√ÅVEIS ==================== */
    :root{
      --roxo:#8A00FF; --roxo-hover:#A63DFF; --preto:#000;

      /* Social buttons */
      --social-btn-w: 190px;
      --social-gap: 12px;
      --social-h: 46px;

      /* Paleta dos mini-cards */
      --procura-bg: #F2E8FF;   --procura-fg: #7A1BFF;
      --malharia-bg: #E6FCF4;  --malharia-fg: #0BA98B;
    }

    /* ==================== HEADER / NAV ==================== */
    .navbar{overflow:visible;padding-top:6px;padding-bottom:6px;display:flex;align-items:center;}
    .header-left,.header-right{display:flex;align-items:center;}
    .header-right{margin-left:auto;gap:20px;}
    .hamburger{display:inline-flex;flex-direction:column;align-items:center;justify-content:center;width:40px;height:40px;border:none;background:transparent;cursor:pointer;}
    .hamburger span{display:block;width:20px;height:2px;background:var(--preto);border-radius:2px;}
    .hamburger span+span{margin-top:4px;}
    @media (max-width:768px){.hamburger{width:32px;height:32px}.hamburger span{width:18px}.hamburger span+span{margin-top:3px}}

    /* ==================== BARRA PROMO ==================== */
    .promo-bar{background:var(--preto);color:#fff;display:flex;align-items:center;justify-content:center;gap:12px;padding:6px 10px;font-size:14px;line-height:1.2;}
    .promo-cta{display:inline-block;background:var(--roxo);color:#fff;text-decoration:none;padding:6px 10px;border-radius:8px;font-weight:600;white-space:nowrap;transition:.2s;}
    .promo-cta:hover{background:var(--roxo-hover);transform:translateY(-1px);}
    @media (max-width:600px){.promo-bar{flex-wrap:wrap;row-gap:6px}}

    /* ==================== HERO (coluna direita) ==================== */
    .hero-grid{display:grid;grid-template-columns:1fr;gap:18px;align-items:center;padding:20px 0 6px;margin:0;justify-items:center;text-align:center;}
    .hero-copy h1{font-size:clamp(22px,3.2vw,34px);color:var(--preto);margin:8px 0 6px;line-height:1.2;}
    .hero-copy p{font-size:clamp(14px,1.6vw,18px);color:#444;margin:0 0 8px;}
    .role-toggle{display:flex;gap:8px;justify-content:center;}
    .chip{appearance:none;border:1px solid #d6d6d6;background:#fff;padding:8px 12px;border-radius:999px;cursor:pointer;font:inherit;color:var(--roxo);transition:.15s;}
    .chip.is-active{background:var(--preto);color:#fff;border-color:var(--preto);}
    .hero-ctas{display:flex;gap:12px;align-items:center;margin:6px 0 8px;justify-content:center;}
    .btn-principal{display:inline-block;background:var(--roxo);color:#fff;padding:12px 18px;border-radius:50px;font-weight:700;text-decoration:none;transition:.15s;}
    .btn-principal:hover{background:var(--roxo-hover);transform:translateY(-1px);}
    @media (min-width:900px){ #hero-sub{white-space:nowrap;display:inline-block;} }

    /* ==================== COMO FUNCIONA (coluna direita) ==================== */
    .how-it-works{margin:18px 0 8px;}
    .how-it-works h2{font-size:clamp(20px,2.4vw,28px);margin:0 0 8px;color:var(--preto);text-align:center;}
    .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;}
    .step{background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;text-align:center;}
    .step-ico{margin-bottom:8px;display:flex;align-items:center;justify-content:center;}
    .step-ico svg{width:56px;height:56px;color:var(--preto);}
    .step h3{font-size:16px;margin:0 0 4px;color:var(--preto);}
    .step p{font-size:14px;color:#555;margin:0;}
    @media (max-width:900px){.steps{grid-template-columns:1fr}}

    /* ==================== MODAL / SHEET ==================== */
    .overlay-menu{position:fixed;inset:0;z-index:1000;display:none;}
    .overlay-menu.is-open{display:block;}
    .overlay-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);}
    .overlay-panel{position:relative;margin:40px auto;width:min(960px,calc(100% - 24px));background:#fff;border-radius:20px;overflow:hidden;display:flex;flex-direction:column;max-height:calc(100% - 80px);}
    .overlay-header{display:flex;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid #eee;}
    .overlay-header h2{margin:0;font-size:22px;font-weight:700;color:#111;}
    .overlay-close{border:0;background:#f3f3f3;width:36px;height:36px;border-radius:12px;font-size:22px;line-height:1;cursor:pointer;}
    .overlay-content{display:grid;grid-template-columns:1fr 1fr;gap:28px;padding:22px;overflow:auto;}
    .section-title{font-size:14px;color:#6b6b6b;font-weight:700;margin:6px 0 10px;text-transform:uppercase;letter-spacing:.3px;}
    .section-title.mt{margin-top:18px;}

    /* ==================== LOGIN / SOCIAL ==================== */
    .section-title--login{font-weight:700;font-size:16px;line-height:1.1;color:#111;text-transform:none;}
    .social-row{display:flex;gap:var(--social-gap);justify-content:flex-start;flex-wrap:wrap;}
    .btn-google,.btn-facebook{
      width:var(--social-btn-w);height:var(--social-h);padding:0 16px;border-radius:999px;
      display:flex;align-items:center;justify-content:flex-start;gap:10px;box-sizing:border-box;font-size:14px;font-weight:500;
    }
    .btn-google{background:#f7f7f7;border:1px solid #dadce0;color:#3c4043;transition:background .2s ease,box-shadow .2s ease;}
    .btn-google:hover{background:#f1f1f1;}
    .btn-google img{width:40px;height:40px;}
    .btn-facebook{background:#1877F2;color:#fff;border:0;cursor:pointer;transition:background .2s ease,transform .12s ease;}
    .btn-facebook:hover{background:#166FE5;transform:translateY(-1px);}
    .btn-facebook .fb-icon{display:flex;align-items:center;justify-content:center;width:var(--social-h);height:var(--social-h);}
    .btn-facebook .fb-icon svg{width:30px;height:30px;display:block;}
    .form-subtitle{font-weight:700;font-size:16px;line-height:1.1;color:#111;margin:28px 0 8px;}
    .access-fields{width:calc((2 * var(--social-btn-w)) + var(--social-gap));max-width:100%;padding-top:8px;}
    .input{width:100%;height:48px;border-radius:999px;border:1px solid #e6e6e6;padding:0 16px;margin-bottom:10px;font-size:14px;background:#eaf1ff;color:#111;}
    .links-inline{margin-top:-4px; margin-bottom:14px;}
    .links-inline a{font-size:12px;color:#333;text-decoration:none;}
    .links-inline a:hover {color: var(--roxo);text-decoration: underline;}
    .btn-primary{width:calc((2 * var(--social-btn-w)) + var(--social-gap));box-shadow: none !important;max-width:100%;height:54px;border-radius:999px;border:0;cursor:pointer;background:#8A00FF;color:#fff;font-weight:800;font-size:16px;box-shadow:0 8px 18px rgba(138,0,255,.25);}
    .signup-text{margin-top:8px;font-size:12px;text-align:left;color:#000;}
    .signup-text a{color:var(--roxo);font-weight:600;text-decoration:none;}
    .signup-text a:hover{text-decoration:underline;}
    @media (max-width:520px){
      :root{ --social-btn-w:100%; }
      .btn-google,.btn-facebook{width:100%;}
      .access-fields,.btn-primary{width:100%;}
    }

    /* ==================== MINI-CARDS / LISTAS ==================== */
    .section-title--simple{font-weight:700;font-size:16px;line-height:1.1;color:#111;text-transform:none;}
    .section-title--simple + .cards-row{margin-top:36px;}
    .cards-row{display:flex;gap:12px;flex-wrap:nowrap;align-items:flex-start;}
    .mini-card{flex:0 0 auto;height:auto;padding:8px 12px;border-radius:12px;gap:6px;display:inline-flex;align-items:center;justify-content:center;text-align:center;border:1px solid #eee;transition:.16s;text-decoration:none;font-weight:700;}
    .mini-card:hover{transform:translateY(-3px);border-color:rgba(0,0,0,.06);box-shadow:none !important;}
    .mini-card-ico svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;}
    .mini-card-title{font-size:12px;line-height:1.1;white-space:nowrap;}
    .mini-card.procura{background:var(--procura-bg);color:var(--procura-fg);}
    .mini-card.malharia{background:var(--malharia-bg);color:var(--malharia-fg);}
    .list-links{display:flex;flex-direction:column;border-top:1px solid #f0f0f0;margin-top:8px;}
    .list-item{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:14px 0;text-decoration:none;color:#222;border-bottom:1px solid #f5f5f5;}
    .list-icon{flex:0 0 24px;display:flex;align-items:center;justify-content:center;}
    .list-text{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .list-item .arrow{flex:0 0 auto;display:flex;align-items:center;}
    .list-item .arrow svg{width:22px;height:22px;stroke-width:3;}
    .list-icon svg[fill="#25D366"]{width:18px;height:18px;}

    /* ==================== CTA / FOOTER ==================== */
    .cta-bar{background:var(--preto);color:#fff;padding:20px 16px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;border-top:1px solid rgba(255,255,255,.06);margin-top:32px;text-align:left;}
    .cta-text h3{margin:0 0 4px;font-size:18px;font-weight:700;}
    .cta-text p{margin:0;font-size:15px;opacity:.9;}
    .cta-btn{display:inline-block;background:#fff;color:var(--preto);text-decoration:none;padding:10px 18px;border-radius:20px;font-weight:600;transition:.2s;white-space:nowrap;}
    .cta-btn:hover{background:#f2f2f5;transform:translateY(-1px);}
    .site-footer{background:#fff;color:var(--preto);border-top:1px solid #eee;padding:18px 16px 28px;}
    .footer-inner{max-width:1180px;margin:0 auto;display:grid;grid-template-columns:auto 1fr;gap:20px 28px;align-items:start;}
    .footer-brand img{height:40px;width:auto;display:block;}
    .footer-cols{display:grid;grid-template-columns:repeat(2,minmax(180px,240px));gap:12px 28px;}
    .footer-col h4{margin:0 0 8px;font-size:14px;font-weight:700;}
    .footer-col ul{list-style:none;margin:0;padding:0;}
    .footer-col li+li{margin-top:6px;}
    .footer-col a{color:var(--preto);text-decoration:none;font-size:14px;}
    .footer-col a:hover{text-decoration:underline;}
    @media (max-width:720px){.footer-inner{grid-template-columns:1fr}.footer-cols{grid-template-columns:1fr}.cta-text h3{font-size:16px}.cta-text p{font-size:14px}}
  
    /* ===== Ajustes finos mantidos ===== */
    .section-title--simple + .cards-row{ margin-top: 8px !important; }
    .section-title--simple.mt{ margin-top: 28px !important; }
    .overlay-col:nth-child(2) .section-title--simple:first-of-type { margin-top: 8px; }
    .links-inline a{ position:relative;padding-left:18px;font-size:13px;color:#333;text-decoration:none;display:inline-flex;align-items:center; }
    .links-inline a::before{ content:"";position:absolute;left:0;top:50%;width:12px;height:12px;transform:translateY(-50%);background:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill='%23555' viewBox='0 0 24 24'><path d='M12 1a5 5 0 0 0-5 5v4H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V12a2 2 0 0 0-2-2h-1V6a5 5 0 0 0-5-5zm-3 9V6a3 3 0 0 1 6 0v4H9z'/></svg>") no-repeat center;background-size:contain; }

    /* ==================== LAYOUT 2 COLUNAS (FILTROS + CONTE√öDO) ==================== */
    .filters-toggle{
      display:none; /* bot√£o antigo (desktop), oculto no mobile */
      position:sticky; top:10px;
      margin:8px 16px 0; padding:8px 12px;
      border-radius:10px;border:1px solid #eaeaea;background:#fff;font-weight:700;cursor:pointer;z-index:20;
    }

    .page-outer{max-width:1280px;margin:0 auto;padding:0 16px;}

    .search-layout{
      display:grid;
      grid-template-columns: 300px 1fr;  /* estreita + larga */
      gap:24px;
      align-items:start;
      margin:10px 0 0; /* aproxima do header */
    }

    .filters-panel{
      border:1px solid #eee;border-radius:14px;padding:16px;background:#fff;
      position:sticky; top:56px;              /* COLADO AO CABE√áALHO */
      max-height: calc(100vh - 72px);
      overflow:auto;
    }
    .filters-title{margin:0 0 12px;font-size:18px;font-weight:700;}
    .filter-field{margin-bottom:12px;}
    .filter-field label{display:block;font-size:14px;margin-bottom:6px;color:#444;}
    .filter-field select{width:100%;height:40px;padding:8px 10px;border:1px solid #ccc;border-radius:10px;background:#fff;color:#333;}
    .filter-actions .btn-primary{width:100%;}
    .link-reset{display:inline-block;margin-top:10px;font-size:14px;color:#6a6a6a;text-decoration:underline;}

    .right-col{min-width:0;} /* impede overflow */
    .results-panel{min-height:200px;margin-top:12px;}

    /* ==================== CONTROLES MOBILE (estilo OLX) ==================== */
    .mobile-controls{display:none;}
    @media (max-width:1024px){
      .mobile-controls{display:block;border-top:1px solid #eee;border-bottom:1px solid #eee;background:#fff;}
      .mobile-controls-inner{max-width:1280px;margin:0 auto;padding:10px 16px;}
      .location-row{display:flex;align-items:center;gap:8px;font-size:14px;color:#333;margin-bottom:8px;}
      .location-row select{border:0;background:#f7f7f7;border-radius:10px;padding:8px 10px;}
      .toolbar-row{display:flex;gap:10px;align-items:center;}
      .btn-filtros{
        display:inline-flex;align-items:center;gap:8px;
        border:1px solid #e5e5e5;background:#fff;border-radius:12px;padding:10px 14px;
        font-weight:700;cursor:pointer;
      }
      .btn-filtros svg{width:18px;height:18px;}
      .filter-pill{
        display:inline-flex;align-items:center;border:2px solid #e5d3ff;background:#f3e9ff;
        color:#5525a5;border-radius:12px;padding:10px 14px;font-weight:600;min-height:40px;
        max-width:70vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
      }

      /* No mobile, a grade vira 1 coluna; filtros abrem como drawer */
      .search-layout{grid-template-columns:1fr;}
      .filters-panel{
        position:fixed;left:0;top:0;bottom:0;width:min(90%,360px);max-width:90vw;border-radius:0;padding:16px;
        transform:translateX(-110%);transition:transform .2s ease;z-index:1001;max-height:none;overflow:auto;
      }
      .filters-panel.is-open{ transform:translateX(0); }
      body.filters-open{ overflow:hidden; }
      /* Esconde o bot√£o antigo no mobile, usamos .btn-filtros */
      .filters-toggle{display:none;}
    }
  </style>
</head>
<body>

  <!-- Faixa preta estreita no topo -->
  <section class="promo-bar" aria-label="Oferta para malharias">
    <span><strong>Malharia:</strong> receba agora novos pedidos por apenas <strong>R$49,90/m√™s</strong>.</span>
    <a class="promo-cta" href="/malharia_info">Saiba como</a>
  </section>

  <!-- Cabe√ßalho -->
  <header class="navbar">
    <div class="header-left">
      <div class="logo">
        <img src="/static/logo.jpg" alt="Logo AcheTece" decoding="async" fetchpriority="high">
      </div>
    </div>
    <div class="header-right">
      <button class="hamburger" id="hamburgerBtn" type="button" aria-label="Abrir menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <!-- CONTROLES MOBILE (estilo OLX) -->
  <div class="mobile-controls" aria-hidden="false">
    <div class="mobile-controls-inner">
      <!-- Linha 1: Localiza√ß√£o -->
      <div class="location-row">
        <span aria-hidden="true">üìç</span>
        <!-- Exemplo simples; pode trocar por seus dados/estados/cidades -->
        <label for="loc-mobile" class="sr-only">Localiza√ß√£o</label>
        <select id="loc-mobile" name="localizacao">
          <option value="">Buscando em todo o Brasil</option>
          <option value="SC">Santa Catarina</option>
          <option value="RS">Rio Grande do Sul</option>
          <option value="PR">Paran√°</option>
        </select>
      </div>
      <!-- Linha 2: Bot√£o Filtros + p√≠lula de resumo -->
      <div class="toolbar-row">
        <button class="btn-filtros" id="toggleFiltersMobile" aria-controls="filtersPanel" aria-expanded="false">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18M6 12h12M10 18h4" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          Filtros
        </button>

        <!-- P√≠lula com resumo dos filtros ativos -->
        {% set ativos = [] %}
        {% for k,v in filtros.items() %}
          {% if v %}{% set _ = ativos.append(k|capitalize ~ ': ' ~ v) %}{% endif %}
        {% endfor %}
        <div class="filter-pill" title="{{ ativos|join(', ') if ativos else 'Todos os teares' }}">
          {{ ativos|join(' ‚Ä¢ ') if ativos else 'Todos os teares' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Bot√£o ‚Äúantigo‚Äù (desktop) ‚Äì fica oculto no mobile -->
  <button class="filters-toggle" id="toggleFilters" aria-expanded="false" aria-controls="filtersPanel">
    Filtros
  </button>

  <!-- ===== TUDO EM DUAS COLUNAS: ESQ = FILTROS | DIR = CONTE√öDO ===== -->
  <div class="page-outer">
    <div class="search-layout">

      <!-- COLUNA ESQUERDA: FILTROS -->
      <aside class="filters-panel" id="filtersPanel">
        <h2 class="filters-title">Filtrar teares</h2>
        <form method="POST" class="formulario" action="{{ url_for('index') }}">
          {% for campo, opcoes_campo in opcoes.items() %}
            <div class="filter-field">
              <label for="{{ campo }}">{{ campo|capitalize }}</label>
              <select name="{{ campo }}" id="{{ campo }}">
                <option value="">-- Todos --</option>
                {% for opcao in opcoes_campo %}
                  <option value="{{ opcao }}" {% if filtros[campo] == opcao %}selected{% endif %}>{{ opcao }}</option>
                {% endfor %}
              </select>
            </div>
          {% endfor %}
          <div class="filter-actions">
            <button type="submit" class="btn-primary">Buscar</button>
            <a href="{{ url_for('index') }}" class="link-reset">Limpar</a>
          </div>
        </form>
      </aside>

      <!-- COLUNA DIREITA: TODO O CONTE√öDO -->
      <div class="right-col">
        <!-- HERO -->
        <main class="hero hero-grid">
          <div class="hero-copy">
            <div class="role-toggle" role="tablist" aria-label="Selecione seu perfil">
              <button class="chip is-active" role="tab" aria-selected="true" data-role="cliente">Procuro Malharia</button>
              <button class="chip" role="tab" aria-selected="false" data-role="malharia">Sou Malharia</button>
            </div>
            <h1 id="hero-title">Encontre teares de malharia prontos para produzir</h1>
            <p id="hero-sub">Filtre sua busca por tipo, di√¢metro, galga e localiza√ß√£o. Fale direto com a malharia.</p>
            <div class="hero-ctas">
              <a id="hero-cta" href="#busca" class="btn-principal">Buscar teares agora</a>
            </div>
          </div>
        </main>

        <!-- COMO FUNCIONA -->
        <section class="how-it-works" aria-labelledby="como-funciona">
          <h2 id="how-title">Precisa produzir malha? Como funciona:</h2>
          <div class="steps" id="how-steps"></div>
        </section>

        <!-- BUSCAR TEARES + RESULTADOS -->
        <section id="busca" class="results-panel">
          <h1>BUSCAR TEARES</h1>
          <p class="frase-instrucao">
            Use os filtros ao lado para encontrar a malharia e o tear que atendem √† sua demanda de produ√ß√£o.
          </p>

          {% if resultados %}
            <div class="tabela-container">
              <!-- sua tabela exatamente como j√° est√° -->
            </div>

            <div class="paginacao">
              {% if pagina > 1 %}
                <a href="?pagina={{ pagina - 1 }}{% for k, v in filtros.items() if v %}&{{ k }}={{ v }}{% endfor %}">‚Üê Anterior</a>
              {% endif %}
              P√°gina {{ pagina }} de {{ total_paginas }}
              {% if pagina < total_paginas %}
                <a href="?pagina={{ pagina + 1 }}{% for k, v in filtros.items() if v %}&{{ k }}={{ v }}{% endfor %}">Pr√≥xima ‚Üí</a>
              {% endif %}
            </div>

            <form action="/exportar" method="get">
              {% for campo, valor in filtros.items() %}
                {% if valor %}
                  <input type="hidden" name="{{ campo }}" value="{{ valor }}">
                {% endif %}
              {% endfor %}
              <button type="submit">Exportar CSV</button>
            </form>
          {% endif %}
        </section>
      </div>
    </div>
  </div>

  <!-- Modal / Sheet -->
  <div id="overlayMenu" class="overlay-menu" aria-hidden="true">
    <div class="overlay-backdrop" data-close></div>
    <section class="overlay-panel" role="dialog" aria-modal="true" aria-labelledby="overlayMenuTitle">
      <header class="overlay-header">
        <h2 id="overlayMenuTitle">Menu</h2>
        <button class="overlay-close" type="button" aria-label="Fechar" data-close>√ó</button>
      </header>

      <div class="overlay-content">
        <div class="overlay-col">
          <h3 class="section-title section-title--login">Entrar ou criar conta</h3>

          <div class="social-row">
            <button class="btn-google" onclick="location.href='/login_google'">
              <img src="/static/icone_google.png" alt="Google">
              <span class="g-text">Entrar com Google</span>
            </button>

            <button class="btn-facebook" onclick="alert('Conectar Facebook em breve')">
              <span class="fb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff">
                  <path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 5 3.66 9.12 8.44 9.88v-6.99H8.08v-2.9h2.36V9.83c0-2.33 1.39-3.62 3.52-3.62 1.02 0 2.09.18 2.09.18v2.3h-1.18c-1.17 0-1.54.73-1.54 1.48v1.78h2.63l-.42 2.9h-2.21v6.99C18.34 21.12 22 17 22 12z"/>
                </svg>
              </span>
              <span>Entrar com Facebook</span>
            </button>
          </div>

          <h3 class="form-subtitle">Dados de acesso</h3>
          <div class="access-fields">
            <input type="email" placeholder="Email de login..." class="input" autocomplete="username">
            <input type="password" placeholder="Senha de acesso..." class="input" autocomplete="current-password">
            <div class="links-inline"><a href="/esqueci_senha">Esqueci minha senha</a></div>
            <button class="btn-primary" onclick="location.href='/login'">Entrar</button>
            <div class="signup-text">N√£o tem cadastro? <a href="/cadastrar_empresa">Crie sua conta aqui</a></div>
          </div>
        </div>

        <div class="overlay-col">
          <h3 class="section-title--simple">Facilidades AcheTece</h3>
          <div class="cards-row">
            <a class="mini-card procura" href="{{ url_for('index') }}#busca">
              <div class="mini-card-ico">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <circle cx="11" cy="11" r="6.8"></circle>
                  <line x1="15.5" y1="15.5" x2="20" y2="20"></line>
                </svg>
              </div>
              <div class="mini-card-title">Procuro Malharia</div>
            </a>
            <a class="mini-card malharia" href="/malharia_info">
              <div class="mini-card-ico">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M3 20V9l6 3V9l6 3V6h3v14H3z"/>
                </svg>
              </div>
              <div class="mini-card-title">Sou Malharia</div>
            </a>
          </div>

          <h3 class="section-title--simple mt">Mais op√ß√µes</h3>
          <nav class="list-links">
            <a class="list-item" href="/cadastrar_empresa">
              <span class="list-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M3 20V9l6 3V9l6 3V6h3v14H3zM5 18h2v-2H5v2zm0-4h2v-2H5v2zm4 4h2v-2H9v2zm0-4h2v-2H9v2zm4 4h2v-2h-2v2z"/>
                </svg>
              </span>
              <span class="list-text">Cadastrar minha malharia</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>

            <a class="list-item" href="{{ url_for('quem_somos') }}">
              <span class="list-icon">
                <img src="/static/logo_simbolo.png" alt="AcheTece" width="28" height="28" style="display:block">
              </span>
              <span class="list-text">Conhe√ßa o AcheTece</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>

            <a class="list-item" href="https://wa.me/5547999999999" target="_blank" rel="noopener">
              <span class="list-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#25D366">
                  <path d="M12 .5C5.65.5.5 5.65.5 12c0 2.11.55 4.16 1.6 5.97L.5 23.5l5.66-1.56A11.44 11.44 0 0 0 12 23.5c6.35 0 11.5-5.15 11.5-11.5S18.35.5 12 .5zm0 20.9c-1.83 0-3.62-.49-5.18-1.41l-.37-.22-3.36.92.9-3.28-.24-.38a9.53 9.53 0 0 1-1.45-5.03C2.3 6.48 6.65 2.1 12 2.1c5.34 0 9.7 4.38 9.7 9.8s-4.36 9.5-9.7 9.5zm5.32-7.13c-.29-.15-1.71-.84-1.97-.94-.27-.1-.46-.15-.65.15-.19.29-.75.94-.92 1.13-.17.19-.34.21-.63.07-.29-.15-1.22-.45-2.32-1.45-.86-.77-1.44-1.72-1.61-2-.17-.29-.02-.45.13-.59.13-.13.29-.34.43-.51.14-.17.19-.29.29-.48.1-.19.05-.36-.02-.51-.07-.15-.65-1.57-.89-2.15-.23-.55-.47-.48-.65-.49h-.55c-.19 0-.51.07-.78.36-.27.29-1.02 1-1.02 2.45s1.04 2.84 1.18 3.04c.15.19 2.05 3.12 4.97 4.37.69.3 1.22.48 1.64.61.69.22 1.32.19 1.82.12.55-.08 1.71-.7 1.95-1.38.24-.68.24-1.26.17-1.38-.07-.12-.26-.19-.55-.34z"/>
                </svg>
              </span>
              <span class="list-text">Suporte AcheTece</span>
              <span class="arrow">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9 6l6 6-6 6" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </a>
          </nav>
        </div>
      </div>
    </section>
  </div>

  <section class="cta-bar" aria-label="Convite para cadastro">
    <div class="cta-text">
      <h3>√â propriet√°rio de uma malharia?</h3>
      <p>Cadastre sua malharia e comece a receber novos pedidos.</p>
    </div>
    <a href="/malharia_info" class="cta-btn">Cadastrar</a>
  </section>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <img src="/static/logo_simbolo.png" alt="AcheTece">
      </div>
      <div class="footer-cols">
        <div class="footer-col">
          <h4>Sobre n√≥s</h4>
          <ul>
            <li><a href="/quem_somos">O AcheTece</a></li>
            <li><a href="/malharia_info">Como funciona</a></li>
            <li><a href="/contato">Fale conosco</a></li>
            <li><a href="/termos">Termos e Pol√≠ticas</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>&nbsp;</h4>
          <ul><li>&nbsp;</li></ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    (function(){
      function iconSVG(n){
        switch(n){
          case 'search':return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="7"></circle><line x1="16.65" y1="16.65" x2="21" y2="21"></line></svg>';
          case 'phone':return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3.1 5.18 2 2 0 0 1 5.11 3h3a2 2 0 0 1 2 1.72c.12.86.31 1.7.57 2.5a2 2 0 0 1-.45 2.11L9 10a16 16 0 0 0 5 5l.67-1.23a2 2 0 0 1 2.11-.45c.8.26 1.64.45 2.5.57A2 2 0 0 1 22 16.92Z"></path></svg>';
          case 'cone':return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 4h10l2 14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2L7 4z"></path><path d="M6 8h12M5.5 12h13M5 16h14" stroke-linecap="round"></path></svg>';
          case 'profile':return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="2" width="14" height="20" rx="2"></rect><path d="M7 7h6M7 11h6"></path><circle cx="18" cy="16" r="3"></circle><path d="M21 22a5 5 0 0 0-6 0"></path></svg>';
          case 'publish':return '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="14" rx="2"></rect><path d="M3 8h18"></path><path d="M12 16V11"></path><path d="M9.5 13.5 12 11l2.5 2.5"></path></svg>';
          default:return '';
        }
      }

      const howCliente={title:"Precisa produzir malha? Como funciona:",steps:[
        {icon:"search",t:"1. Ache",d:"Filtre por tipo, di√¢metro, galga e localiza√ß√£o."},
        {icon:"phone",t:"2. Conecte",d:"Fale direto com a malharia para alinhar prazos e pre√ßos."},
        {icon:"cone",t:"3. Produza",d:"Combine e acompanhe a produ√ß√£o com quem tece sua malha."}
      ]};
      const howMalharia={title:"Tem teares ociosos? Como funciona:",steps:[
        {icon:"profile",t:"1. Cadastre sua malharia",d:"Crie seu perfil e informe os contatos."},
        {icon:"publish",t:"2. Publique seus teares",d:"Detalhe tipo, di√¢metro, galga e localiza√ß√£o."},
        {icon:"phone",t:"3. Receba contatos",d:"Negocie prazos, valores e transforme ociosidade em produ√ß√£o."}
      ]};

      const howTitle=document.getElementById('how-title');
      const howSteps=document.getElementById('how-steps');

      function renderHow(cfg){
        howTitle.textContent=cfg.title;
        howSteps.innerHTML=cfg.steps.map(s=>`
          <div class="step">
            <div class="step-ico">${iconSVG(s.icon)}</div>
            <h3>${s.t}</h3>
            <p>${s.d}</p>
          </div>`).join('');
      }

      const cliente={title:"Encontre teares de malharia prontos para produzir",sub:"Filtre sua busca por tipo, di√¢metro, galga e localiza√ß√£o. Fale direto com a malharia.",ctaText:"Buscar teares agora",ctaHref:"#busca"};
      const malharia={title:"Tem teares ociosos? Receba pedidos todo m√™s",sub:"Seja encontrado por quem precisa produzir. Cadastro simples por apenas R$ 49,90/m√™s.",ctaText:"Cadastrar minha malharia",ctaHref:"/malharia_info"};

      const tabs=document.querySelectorAll('.role-toggle [data-role]');
      const h1=document.getElementById('hero-title');
      const p=document.getElementById('hero-sub');
      const cta=document.getElementById('hero-cta');

      function setRole(role){
        const cfgHero= role==='malharia'? malharia: cliente;
        const cfgHow = role==='malharia'? howMalharia: howCliente;
        h1.textContent=cfgHero.title; p.textContent=cfgHero.sub; cta.textContent=cfgHero.ctaText; cta.setAttribute('href',cfgHero.ctaHref);
        tabs.forEach(b=>{const a=b.dataset.role===role; b.classList.toggle('is-active',a); b.setAttribute('aria-selected',a?'true':'false');});
        renderHow(cfgHow);
      }
      tabs.forEach(b=> b.addEventListener('click',()=>setRole(b.dataset.role)));
      setRole('cliente');
    })();
  </script>

  <script>
    (function(){
      const overlay=document.getElementById('overlayMenu');
      const openBtn=document.getElementById('hamburgerBtn');
      const closeEls=overlay.querySelectorAll('[data-close]');

      function openMenu(){overlay.classList.add('is-open');overlay.setAttribute('aria-hidden','false');document.body.style.overflow='hidden';}
      function closeMenu(){overlay.classList.remove('is-open');overlay.setAttribute('aria-hidden','true');document.body.style.overflow='';}

      if(openBtn) openBtn.addEventListener('click',openMenu);
      closeEls.forEach(el=>el.addEventListener('click',closeMenu));
      document.addEventListener('keydown',e=>{ if(e.key==='Escape' && overlay.classList.contains('is-open')) closeMenu();});
      overlay.addEventListener('click',e=>{ if(e.target===overlay) closeMenu();});
    })();
  </script>

  <!-- Toggle dos filtros (desktop e mobile) -->
  <script>
  (function(){
    const btnDesktop = document.getElementById('toggleFilters');        // bot√£o antigo (desktop)
    const btnMobile  = document.getElementById('toggleFiltersMobile');   // novo bot√£o (mobile estilo OLX)
    const panel = document.getElementById('filtersPanel');
    if(!panel) return;

    function toggle(){
      const open = panel.classList.toggle('is-open');
      document.body.classList.toggle('filters-open', open);
      if(btnDesktop) btnDesktop.setAttribute('aria-expanded', open ? 'true' : 'false');
      if(btnMobile)  btnMobile.setAttribute('aria-expanded',  open ? 'true' : 'false');
    }

    if(btnDesktop) btnDesktop.addEventListener('click', toggle);
    if(btnMobile)  btnMobile.addEventListener('click',  toggle);

    // Fecha ao tocar fora (somente quando √© drawer)
    panel.addEventListener('click', e => {
      if(e.target === panel && panel.classList.contains('is-open')) toggle();
    });
  })();
  </script>
  
</body>
</html>
