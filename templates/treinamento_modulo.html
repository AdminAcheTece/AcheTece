<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>{{ module.title }} - Treinamento</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon_final.ico') }}">

  <!-- (mesmo padrão do treinamento_home.html) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f6f7f8;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:rgba(17,24,39,0.10);
      --soft:rgba(17,24,39,0.06);
      --olive:#7B7424;
      --maxw:1100px;
      --radius:24px;
      --pill:999px;
      --shadow:0 10px 28px var(--soft);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ====== Faixa/Barra branca (logo + botões) ====== */
    .whitebar{
      position:sticky;
      top:0;
      z-index:50;
      background:#fff;
      border-bottom:1px solid var(--line);
    }
    .whitebar__inner{
      max-width:var(--maxw);
      margin:0 auto;
      padding:12px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:200px;
      text-decoration:none;
      color:inherit;
    }
    .brand__logo{
      height:34px;
      width:auto;
      display:block;
    }
    .brand__text{
      display:flex;
      flex-direction:column;
      line-height:1.05;
    }
    .brand__title{
      font-weight:900;
      font-size:14px;
      letter-spacing:-0.01em;
    }
    .brand__subtitle{
      font-weight:700;
      font-size:12px;
      color:var(--muted);
      margin-top:2px;
    }

    .whitebar__actions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      text-decoration:none;
      border-radius:var(--pill);
      padding:10px 14px;
      font-weight:900;
      font-size:13px;
      line-height:1;
      border:1px solid #111;
      color:#111;
      background:#fff;
      transition:transform .05s ease, opacity .15s ease;
      white-space:nowrap;
    }
    .btn:hover{ opacity:.92; }
    .btn:active{ transform:translateY(1px); }

    .btn--primary{
      background:#111;
      color:#fff;
      border-color:#111;
    }

    /* ====== Conteúdo ====== */
    .section{
      max-width:var(--maxw);
      margin:0 auto;
      padding:18px 18px 34px;
    }

    .module-head{
      display:flex;
      align-items:stretch;
      justify-content:space-between;
      gap:16px;
      flex-wrap:wrap;
    }

    .module-title{
      margin:0 0 6px 0;
      font-size:28px;
      font-weight:900;
      letter-spacing:-0.02em;
    }
    .module-desc{
      color:#374151;
      max-width:820px;
      line-height:1.55;
      font-size:14px;
      font-weight:600;
    }

    .progress-card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px 16px 14px;
      box-shadow:var(--shadow);
      min-width:240px;
      max-width:320px;
      flex:0 0 auto;
    }
    .progress-label{
      font-weight:900;
      font-size:13px;
      color:#111;
    }
    .progress-value{
      font-size:34px;
      font-weight:900;
      line-height:1;
      margin-top:8px;
      letter-spacing:-0.02em;
    }
    .progress-track{
      height:10px;
      background:#eee;
      border-radius:999px;
      margin-top:10px;
      overflow:hidden;
    }
    .progress-bar{
      height:10px;
      width:{{ percent }}%;
      background:var(--olive);
    }
    .progress-hint{
      margin-top:8px;
      color:var(--muted);
      font-size:12px;
      font-weight:700;
    }

    .lessons{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:20px;
      background:#fff;
      overflow:hidden;
      box-shadow:0 6px 18px rgba(17,24,39,0.04);
    }
    .lesson{
      padding:14px;
      border-top:1px solid #f1f5f9;
    }
    .lesson:first-child{ border-top:none; }

    .lesson__row{
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      align-items:flex-start;
    }
    .lesson__title{
      font-weight:900;
      font-size:15px;
      letter-spacing:-0.01em;
    }
    .lesson__summary{
      color:#4b5563;
      font-size:13px;
      line-height:1.5;
      margin-top:5px;
      font-weight:600;
      max-width:820px;
    }
    .lesson__meta{
      color:#6b7280;
      font-size:12px;
      margin-top:7px;
      font-weight:800;
    }

    .lesson__actions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .status{
      padding:6px 10px;
      border-radius:999px;
      font-weight:900;
      font-size:12px;
      border:1px solid #e5e7eb;
      background:#f8fafc;
      color:#111;
      white-space:nowrap;
    }
    .status--done{
      background:#ecfdf5;
      border-color:#86efac;
      color:#065f46;
    }
    .status--progress{
      background:#eff6ff;
      border-color:#93c5fd;
      color:#1e3a8a;
    }

    /* Responsivo: mantém a “cara” do home */
    @media (max-width:640px){
      .whitebar__inner{ padding:10px 14px; }
      .brand__subtitle{ display:none; }
      .module-title{ font-size:24px; }
      .progress-card{ width:100%; max-width:none; }
    }
  </style>
</head>

<body class="header-v1">

  <!-- Faixa/Barra branca (igual ao treinamento_home.html) -->
  <header class="whitebar" aria-label="Barra superior do treinamento">
    <div class="whitebar__inner">
      <a class="brand" href="{{ url_for('treinamento_home') }}">
        <!-- Ajuste o filename do logo se no seu treinamento_home.html for outro -->
        <img class="brand__logo"
             src="{{ url_for('static', filename='logo_achetece.png') }}"
             alt="AcheTece"
             onerror="this.style.display='none'">
        <span class="brand__text">
          <span class="brand__title">Treinamento</span>
          <span class="brand__subtitle">Operacional • AcheTece</span>
        </span>
      </a>

      <nav class="whitebar__actions">
        <a class="btn" href="{{ url_for('treinamento_home') }}">← Voltar aos módulos</a>
        <a class="btn" href="{{ url_for('painel_malharia') }}">← Voltar ao painel</a>
      </nav>
    </div>
  </header>

  <main class="section">
    <div class="module-head">
      <div>
        <h1 class="module-title">{{ module.title }}</h1>
        <div class="module-desc">{{ module.desc }}</div>
      </div>

      <aside class="progress-card" aria-label="Progresso do módulo">
        <div class="progress-label">Progresso do módulo</div>
        <div class="progress-value">{{ percent }}%</div>
        <div class="progress-track" role="progressbar" aria-valuenow="{{ percent }}" aria-valuemin="0" aria-valuemax="100">
          <div class="progress-bar"></div>
        </div>
        <div class="progress-hint">Complete as aulas para avançar.</div>
      </aside>
    </div>

    <section class="lessons" aria-label="Lista de aulas">
      {% for a in lessons %}
      <div class="lesson">
        <div class="lesson__row">
          <div>
            <div class="lesson__title">{{ a.title }}</div>
            <div class="lesson__summary">{{ a.summary }}</div>
            <div class="lesson__meta">⏱ {{ a.minutes }} min</div>
          </div>

          <div class="lesson__actions">
            {% if a.status == "done" %}
              <span class="status status--done">Concluída</span>
            {% elif a.status == "in_progress" %}
              <span class="status status--progress">Em andamento</span>
            {% else %}
              <span class="status">Não iniciada</span>
            {% endif %}

            <a class="btn btn--primary"
               href="{{ url_for('treinamento_aula', module_key=module.key, lesson_key=a.key) }}">
              Abrir
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </section>

    <!-- Se quiser manter também os botões no rodapé (não atrapalha), pode deixar.
         Se o treinamento_home.html NÃO tem isso, você pode remover este bloco. -->
    <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap;">
      <a class="btn" href="{{ url_for('treinamento_home') }}">← Voltar aos módulos</a>
      <a class="btn" href="{{ url_for('painel_malharia') }}">← Voltar ao painel</a>
    </div>
  </main>
</body>
</html>
